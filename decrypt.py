import pyAesCrypt
import glob
import os

startFolder = "Safe-Folder"
# Encryption/decryption buffer size - 64K
bufferSize = 64 * 1024
# Get current directory
curDir = os.getcwd()
# Prompt user for password to decrypt files
#password1 = input('\n> Enter password to decrypt: ')

password = "A%rAcgVV#UNFD@qrLt4S@P?=fv?=yDEDsJFpu4jUQH3SU5MN&@?jaf+g!zv&Y*F+M!u-QEmQvv?RXd3ubF43*p!agnrsx+NY6kcJ=dDHX9bg_!aE*R-8%73@nyaVRVW8Xc-=nPCW3h?@H6*GcA@y4uW^uR?Dyxn*Qp2%AEAy-?V_xzxrwG7YH+_4N!2AJ_&BP$^$YYBPZvYc=C64X%@M8adHcR*r5GwupWVmGmGnuLmPDv2&KM^x3awzbyncfcvFk*6nfUM^b5-4LUkWFGgrhZ#n9adCPpuH3&XpmK$cBXD84gx&XGCb4rKkJW*?xLpSZJzG=NLAhf#LMe6atX!LF%QyVNm&!Nxg%wPDRn-J5vs3wKnP!gRCPZ3UQ2VE8SecXYPgKL@cfbbQ&Yn?DhuzeK-Q+Y+cwjw&az2a?x5?8Bd8JMh7TK7szyzUbLser6f59Ab$!aFwjg+Hdg&dGbLbs?Q9JFpMyLt&fZ8@Q#gfhfu&FRsYeDcBKx!m==8h=q7BP6rMT3Yu9h=t5%w!vMSZ!uD3n$N-9TDn?wFFHHn#9s=K3NJqQ2N7W*bqS!8P_^7XXFyR!rYS99uKG!cUcpaG$-Dz#!?#Lya8zwL2prLKa44K=jXZmMV28jD9M@REAqM2%z28hatwU=8gpkB*7zRx?fUD&AnX8!HQKtKgqAFqHxcE9_3nK3&TEGhcDJBVbwPqCm^vk%L_6arK9Ykc2kkSZkRFg3b9Gy4-LkD!m7g%^znd$b$z#V#NQK$G3Ww4F9Q5UeAkE7dL8@5AUtE=MDnA&gP#N8+&9RpvgZ9+nw5FB+G9F^AcDeR8V&J=5ux@Fb$4Vpa39RW$R!8dCDCC5NzHE3eFz&vntMeZt9F9jGFn?m+nR+_J45?=bsF8T9DjJQ*e$3b26$h*fr!zcfGhenYr#P3jAJC-V6h$BkGF-y=e9+kq&UG8?#wVH^mWV#k2V9jnBFGx^J4AUUtb!zvSdjv=SysN&bYRgj!4#G-zZ2fXBWY@CXH96X5$xLB2dUXXuR=T7NLB&dPR?&K4Q5bF$Qku5XZyeZac?Dz6@6MjcN?xffH?h5yYSVq!fcmcWr3vH7exkE?wnGw3%f^-U_g^nYkcP%33sYuSsM5srbV9t%%y6gHXENmdba$N2db-RS%CeDSa2rPtTJ$U7aH#=GDXt@uzP@WXr!kN7%n?6c2b7R?!hx-85crSmtC4VjcbX89!C4uvLyYu%q%%9e+BprMrdLw&LreCu-7pSgsh#_2eHd7wfMLvXR+^Y^C_#CA2mSpB#*w*EF!XW9d8pZ&!KGv4XW5cFzCT5dsg=8CMD3_X$*DpDg!fCnA5mUh9SK7AK5M@%b8=BZcxdr^!@FJzu5rYQ+*9rz-#efGA^mZtwsnNtgw-Kc9x#3G*PFT_&nbqnuKvDCp?rFUmj57MAYrFYKsqK&f8_F@N77U4cMsmzgaYX^Ddaa2@5$F52C&ykfpEAQ63B_BhEUw5PCw6jPw6uyjSNZXX!sqTU^S&#q8aABT%+N_wY%e%E3VkjyQrXhYGC4gPZDthR$jc2b+YxKRQSg7R2hdFW4Tq?SHMX5gecXkh+khbqt3KBPMfECQSzs?vBYzAJkCNGT&J_CJZ#trqc$qJRK*a_n+WDTZ3Hzws5#+LZpu^UXuQHxDD=Vj8x7tS8mhKw@!SEypP3?ZhjEF5R$EUtp6dwCb97my&k$j4sf$@m+7Xj=T_*wA@tmfcjVpm^SSyb?&-uuk9cy=yVm#v#KtfF_s@T4*GXY*ZNHH-hTkLr4eMBjB2--q8@%7FKHmUmqyTdteMwe2y$Kaezghz!K%mXt?mrUt%7?wNYT!$Hk935UN&!uwRhmggHx6BJ*#y?DBk=snL=RCxzaFBNvTwzZTpUttmfKr+QpTx_ZPN&enrC?7H!7XAk6^rZaG3zs_$SEGf?eBu5@W4&czs**JJuR+k9EmEqq9a!RysRmRs4xW8xFFR6@hPPLBK@sv8Z+eau2@H2@6fZBh3VtkRcppvc?HTyD%5bDXfHbt&j?bA7*Cn#5=3FqCJ8KJCe85t#b2JdvP247qf"
 
print('\n> Beginning recursive decryption...\n\n')
# Main loop to decrypt all files recursively
for x in glob.glob('{}\\**\*'.format(startFolder), recursive=True):
    fullpath = os.path.join(curDir, x)
    fullnewf = os.path.join(curDir, os.path.splitext(x)[0])
    # Decrypt
    if os.path.isfile(fullpath):
        print('>>> Encrypted: \t' + fullpath + '')
        try:
            pyAesCrypt.decryptFile(fullpath, fullnewf, password, bufferSize)
            print('>>> Decrypted: \t' + fullnewf + '\n')
            os.remove(fullpath)     # Remove encrypted file after decrypt
        except ValueError:
            print('>>> Error - Wrong password!\n')