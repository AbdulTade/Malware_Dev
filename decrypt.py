import pyAesCrypt
import glob
import os

startFolder = "Safe-Folder"
# Encryption/decryption buffer size - 64K
bufferSize = 64 * 1024
# Get current directory
curDir = os.getcwd()
# Prompt user for password to decrypt files
#password1 = input('\n> Enter password to decrypt: ')

password = "Your-Password"
 
print('\n> Beginning recursive decryption...\n\n')
# Main loop to decrypt all files recursively
for x in glob.glob('{}\\**\*'.format(startFolder), recursive=True):
    fullpath = os.path.join(curDir, x)
    fullnewf = os.path.join(curDir, os.path.splitext(x)[0])
    # Decrypt
    if os.path.isfile(fullpath):
        print('>>> Encrypted: \t' + fullpath + '')
        try:
            pyAesCrypt.decryptFile(fullpath, fullnewf, password, bufferSize)
            print('>>> Decrypted: \t' + fullnewf + '\n')
            os.remove(fullpath)     # Remove encrypted file after decrypt
        except ValueError:
            print('>>> Error - Wrong password!\n')
